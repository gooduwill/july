<!DOCTYPE html>
<html>
<head>

<title> employee info system</title>

    </head>

    <body>
        
     <button onclick="handleClick(event)" id="empBtn">fetch employee record</button>

     <button onclick="fetchUsers(event)">fetch users record from jasonplaceholder website</button>
     <h2 id="title"> </h2>
     <ul id="list">

     </ul>

     <h2 id="title2"> </h2>
     <ul id="list2">

     </ul>
     <script>

        function fetchUsers( ){
            let users=[]
            fetch('http://jsonplaceholder.typicode.com/users')
            .then((response)=>{
              return response.json()
            })
            .then((data)=>{
            users=data
            console.log('users',users)
            })
            .catch((err)=>{
            console.log(err)
            })
            //console.log(event)
            //const xhr=new XMLHttpRequest()
    //xhr.open('GET', 'http://jsonplaceholder.typicode.com/users')
    //xhr.send()
    //xhr.onload=function(){
       // users=JSON.parse(xhr.responseText)
    
    //console.log('users',users)
    //document.getElementById('title2').innerHTML=users.length}
    //console.log(xhr.responseText)
    //const result1=JSON.parse(xhr.responseText)
    //const listHandle= document.getElementById('list2')
     //const titleHandle=document.getElementById('title2')
     //titleHandle.innerHTML=`listing users -${result1.length}`
     //let employeesDetails=''
     //result1.forEach(function(ele){
      // employeesDetails+=`<li>${ele.name}-${ele.position}</li>`
      // listHandle.innerHTML=employeesDetails

    //console.log(result1)
    //console.log('total users record',result1.length)
        
        }
function handleClick(event){
    console.log('event object',event)
    const xhr=new XMLHttpRequest()
    xhr.open('GET', 'http://localhost:3000/employees')
    xhr.send()
    xhr.onload=function(){
    //console.log(xhr.responseText)
    const result=JSON.parse(xhr.responseText)
    //console.log(result)
    //console.log('total employees record',result.length)
     const listHandle= document.getElementById('list')
     const titleHandle=document.getElementById('title')
     titleHandle.innerHTML=`listing employees -${result.length}`
     const empbtnHandle=document.getElementById('empBtn')
     empbtnHandle.setAttribute('disabled',true)
     let employeesDetails=''
     result.forEach(function(ele){
       employeesDetails+=`<li>${ele.name}-${ele.position}</li>`
     })
      listHandle.innerHTML=employeesDetails
    }
}


     </script>
    </body>

</html>